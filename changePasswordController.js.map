{"version":3,"sources":["webpack://UnataWidgets/./app/angular/components/registration/controllers/changePasswordController.js"],"names":["angular","module","controller","$scope","$state","Restangular","auth","config","registrationService","resetToken","passwordRegex","passwordPattern","values","newPassword","confirmNewPassword","changing","change","error","message","one","customPUT","new_password","confirm_new_password","then","result","catch","response","data","showLogin","user","status","login","open","LOGIN_CONTEXTS","PASSWORD_CHANGE","go"],"mappings":"sIAAA,4EAGeA,cACZC,OAAO,iCAAkC,IACzCC,WACC,2BAHW,oFAIX,SAAUC,EAAQC,EAAQC,EAAaC,EAAMC,EAAQC,EAAqBC,GAAY,MACpFN,EAAOI,OAASA,EAChBJ,EAAOO,cAAgBH,EAAOI,gBAC9BR,EAAOS,OAAS,CACdC,YAAa,GACbC,mBAAoB,IAEtBX,EAAOY,UAAW,EAElBZ,EAAOa,OAAS,YACPb,EAAOc,aACPd,EAAOe,QAEdf,EAAOY,UAAW,EAElBV,EAAYc,IAAK,uBAAsBV,KACpCW,UAAU,CACTC,aAAclB,EAAOS,OAAOC,YAC5BS,qBAAsBnB,EAAOS,OAAOE,qBAErCS,KAAKC,IACJrB,EAAOe,QAAUM,EAAON,QACxBf,EAAOS,OAAOC,YAAc,GAC5BV,EAAOS,OAAOE,mBAAqB,GACnCX,EAAOY,UAAW,IAEnBU,MAAMC,IACLvB,EAAOc,MAAQS,EAASC,KAAOD,EAASC,KAAKT,QAAUQ,EAASR,QAChEf,EAAOY,UAAW,KAIxBZ,EAAOyB,UAAkC,WAAtB,UAAAtB,EAAKuB,YAAL,eAAWC,QAE9B3B,EAAO4B,MAAQ,KACbvB,EACGwB,KAAK,QAAS,KAAM,KAAM,KAAM,KAAM,KAAMC,IAAeC,iBAC3DX,KAAK,KACJnB,EAAO+B,GAAG","file":"changePasswordController.js","sourcesContent":["import angular from 'angular'\nimport { LOGIN_CONTEXTS } from '@app/angular/constants/loginContexts'\n\nexport default angular\n  .module('ChangePasswordControllerModule', [])\n  .controller(\n    'ChangePasswordController',\n    function ($scope, $state, Restangular, auth, config, registrationService, resetToken) {\n      $scope.config = config\n      $scope.passwordRegex = config.passwordPattern\n      $scope.values = {\n        newPassword: '',\n        confirmNewPassword: '',\n      }\n      $scope.changing = false\n\n      $scope.change = () => {\n        delete $scope.error\n        delete $scope.message\n\n        $scope.changing = true\n\n        Restangular.one(`user/password_reset/${resetToken}`)\n          .customPUT({\n            new_password: $scope.values.newPassword,\n            confirm_new_password: $scope.values.confirmNewPassword,\n          })\n          .then(result => {\n            $scope.message = result.message\n            $scope.values.newPassword = ''\n            $scope.values.confirmNewPassword = ''\n            $scope.changing = false\n          })\n          .catch(response => {\n            $scope.error = response.data ? response.data.message : response.message\n            $scope.changing = false\n          })\n      }\n\n      $scope.showLogin = auth.user?.status === 'trial'\n\n      $scope.login = () => {\n        registrationService\n          .open('login', null, null, null, null, null, LOGIN_CONTEXTS.PASSWORD_CHANGE)\n          .then(() => {\n            $state.go('main.home')\n          })\n      }\n    }\n  )\n"],"sourceRoot":""}