(window.webpackJsonpUnataWidgets=window.webpackJsonpUnataWidgets||[]).push([[93],{"5bce4db2e07e0f7fe13b":function(e,r,t){"use strict";t.r(r),t.d(r,"AddressAutocomplete",(function(){return m}));var o=t("8af190b70a6bc55c6f1b"),n=t("9fc5f8fdc53f500bac72"),l=t("f074df523e3a48a4d6d1"),a=t("c72272a7287d0d0d7bf8"),i=t("9a0b4e03ea3c43527074");const c=Object(a.hb)(e=>({container:{display:"flex",alignItems:"center",padding:a.pb.toPx`${e.border.width.thick} 0`},icon:{marginRight:e.size.spacing.xSmall,color:e.color.neutral.grey4},address:{display:"flex",flexFlow:"column nowrap"},label:{color:e.color.neutral.black,fontSize:e.size.font.body},detail:{color:e.color.neutral.grey4,fontSize:e.size.font.caption}}));var s=({address:e,selected:r})=>{const t=c();return Object(i.c)("div",{style:t.container,role:"option","aria-selected":!!r,children:[Object(i.b)(a.r,{icon:"icon-pin",size:20,style:t.icon}),Object(i.c)("div",{style:t.address,children:[Object(i.b)("span",{style:t.label,"data-test":"address-label",children:e.label}),Object(i.b)("span",{style:t.detail,"data-test":"address-detail",children:e.detail})]})]})};const d=["selectId","ariaLabel","onAddressSelected","country","requireFullAddress","initialOption","error","valid","disabled","inputSize","fullWidth","loadingMessage","noOptionsMessage","placeholder","selectAllOnFocus"];function b(e,r){if(null==e)return{};var t,o,n=function(e,r){if(null==e)return{};var t,o,n={},l=Object.keys(e);for(o=0;o<l.length;o++)t=l[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)t=l[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){O(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function O(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const f={loadingMessage:"Loading...",noOptionsMessage:"No addresses found",placeholder:"Address or ZIP Code"},g=Object(a.hb)(e=>({loadingDots:{margin:a.pb.toPx`0 ${e.size.spacing.medium}`},error:{marginTop:e.size.spacing.xxSmall,color:e.color.ui.error}}));var y=e=>{var r;let{selectId:t,ariaLabel:c,onAddressSelected:u,country:O,requireFullAddress:y=!1,initialOption:j=null,error:h,valid:v,disabled:m=!1,inputSize:w="regular",fullWidth:P=!0,loadingMessage:S=f.loadingMessage,noOptionsMessage:x=f.noOptionsMessage,placeholder:z=f.placeholder,selectAllOnFocus:D=!1}=e,k=b(e,d);const M=g(),I=Object(a.ob)(),L={error:Boolean(h),disabled:m,fullWidth:P,inputSize:w,required:!1,valid:v},A=Object(a.kb)(I,L),C=p(p({},Object(a.jb)(I,L,200)),((e,r)=>{const t=t=>t.isFocused?e.color.brand.primary.dark:r.error?e.color.ui.error:r.valid?e.color.ui.success:e.color.border.regular;return{option:e=>e,valueContainer:r=>p(p({},r),{},{paddingLeft:e.size.spacing.small,paddingRight:e.size.spacing.xxLarge,marginLeft:e.border.radius.small}),control:(r,o)=>p(p({},r),{},{borderColor:t(o),borderWidth:e.border.width.regular,cursor:o.isDisabled?"not-allowed":"text","&:hover":{borderColor:t(o)},"&:focus":{boxShadow:a.pb.toPx`0 0 0 1px ${e.color.brand.primary.dark}`}})}})(I,L)),[E,F]=Object(o.useState)(j),[$,W]=Object(o.useState)("");Object(o.useEffect)(()=>{j&&F(j)},[j]);const{data:q,isLoading:J}=Object(n.b)($?{query:$,country:O}:void 0);return Object(i.c)(i.a,{children:[Object(i.b)(l.a,p({id:t,"aria-label":c,"aria-describedby":`${t}-error`,"aria-expanded":(null==q||null===(r=q.options)||void 0===r?void 0:r.length)>0?"true":"false",isDisabled:m,isLoading:J,options:(e=>{var r;const t=null==e||null===(r=e.options)||void 0===r?void 0:r.map(e=>({label:`${e.label} ${e.detail}`,value:e}));return t&&y?t.filter(e=>"address"===e.value.location_type):t})(q),formatOptionLabel:e=>Object(i.b)(s,{address:e.value,selected:(null==E?void 0:E.label)===e.label}),components:{IndicatorSeparator:()=>null,DropdownIndicator:()=>null,LoadingIndicator:()=>Object(i.b)("span",{style:M.loadingDots,children:Object(i.b)(a.E,{})})},loadingMessage:()=>S,noOptionsMessage:()=>x,placeholder:z,openMenuOnClick:!1,blurInputOnSelect:!0,value:E,inputValue:$,onChange:(e,{action:r})=>{"set-value"!==r&&(F(e),u(e.value))},onInputChange:(e,{action:r})=>(W(e),"input-change"===r&&""===e&&(F(null),u(null)),null),onFocus:e=>{if(E&&E.label&&W(E.label),D){const r=e.target;setTimeout(()=>{r.select()},0)}},theme:A,styles:C,"data-test":"address-select"},k)),h&&Object(i.b)(a.n,{id:`${t}-error`,"aria-live":"assertive",style:M.error,"data-test":"error-text",children:h})]})};function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){v(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function v(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var m=e=>Object(i.b)(n.a,{config:{suspense:!1},children:Object(i.b)(y,h({},e))})}}]);