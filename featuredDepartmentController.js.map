{"version":3,"sources":["webpack://UnataWidgets/./app/angular/components/shop/controllers/featuredDepartmentController.js"],"names":["angular","module","controller","$q","$scope","canvas","collectionsService","config","placementsService","shoppingSelectorService","titleService","tree","vm","this","collections","featuredDepartmentName","current","name","featuredDepartmentCollections","placement","target","collection_list","setTitle","getCollectionData","collection","index","getCollection","COLLECTION_CONSTANTS","PRODUCT_LIMIT","userChangedContextOrStore","then","collectionData","breadcrumbs","parents","parent","push","label","state","params","active"],"mappings":"qPAIeA,cACZC,OAAO,8CAA+C,IACtDC,WACC,+BAHW,0HAIX,SACEC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAKC,KACXD,EAAGL,OAASA,EACZK,EAAGP,OAASA,EACZO,EAAGE,YAAc,GACjBF,EAAGG,uBAAyBJ,EAAKK,QAAQC,KACzCL,EAAGM,8BAAgCP,EAAKK,QAAQG,UAAUC,OAAOC,gBAEjEX,EAAaY,SAASV,EAAGG,wBAEzBH,EAAGW,kBAAoB,CAACC,EAAYC,KAClCnB,EACGoB,cACCF,EACAG,IAAqBC,cACrBnB,EAAwBoB,2BAEzBC,KAAKC,IACJnB,EAAGE,YAAYW,GAASM,KAK9BnB,EAAGoB,YAAc,GAEjB,IAAOrB,EAAKsB,QAASC,IACnBtB,EAAGoB,YAAYG,KAAK,CAClBC,MAAOF,EAAOjB,KACdoB,MAAOH,EAAOG,MACdC,OAAQJ,EAAOI,WAIf3B,EAAKK,QAAQC,OACfL,EAAGoB,YAAYG,KAAK,CAClBC,MAAOzB,EAAKK,QAAQC,KACpBsB,QAAQ,IAGV7B,EAAaY,SAASX,EAAKK,QAAQC","file":"featuredDepartmentController.js","sourcesContent":["import _ from 'lodash'\nimport angular from 'angular'\nimport { COLLECTION_CONSTANTS } from '@app/angular/constants/collections'\n\nexport default angular\n  .module('FeaturedDepartmentControllerComponentModule', [])\n  .controller(\n    'FeaturedDepartmentController',\n    function FeaturedDepartmentController(\n      $q,\n      $scope,\n      canvas,\n      collectionsService,\n      config,\n      placementsService,\n      shoppingSelectorService,\n      titleService,\n      tree\n    ) {\n      const vm = this\n      vm.config = config\n      vm.canvas = canvas\n      vm.collections = []\n      vm.featuredDepartmentName = tree.current.name\n      vm.featuredDepartmentCollections = tree.current.placement.target.collection_list\n\n      titleService.setTitle(vm.featuredDepartmentName)\n\n      vm.getCollectionData = (collection, index) => {\n        collectionsService\n          .getCollection(\n            collection,\n            COLLECTION_CONSTANTS.PRODUCT_LIMIT,\n            shoppingSelectorService.userChangedContextOrStore\n          )\n          .then(collectionData => {\n            vm.collections[index] = collectionData\n          })\n      }\n\n      // Generate breadcrumbs for Featured Departments\n      vm.breadcrumbs = []\n\n      _.each(tree.parents, parent => {\n        vm.breadcrumbs.push({\n          label: parent.name,\n          state: parent.state,\n          params: parent.params,\n        })\n      })\n\n      if (tree.current.name) {\n        vm.breadcrumbs.push({\n          label: tree.current.name,\n          active: true,\n        })\n\n        titleService.setTitle(tree.current.name)\n      }\n    }\n  )\n"],"sourceRoot":""}