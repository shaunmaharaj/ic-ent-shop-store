(window.webpackJsonpUnataWidgets=window.webpackJsonpUnataWidgets||[]).push([[18],{"1a03c032bc6a177a5eaf":function(e,t,o){"use strict";o.r(t);var r=o("46f8f4ccfe1b73ca4d0c"),l=o.n(r);const i="https://aq.flippenterprise.net/2419/iframe.js",n={COLLECTION:"collection",PRODUCT:"product"};var a=o("95066b9b78a83cfbe91a");var c=o("2befd5a067fda4f72081");var s=o("23544f2d4e03afe03ad7"),p=o("7d8545d2807e9743ca01"),d=o.n(p);t.default=l.a.module("FlyerFlippControllerComponentModule",[]).controller("FlyerFlippController",["$scope","auth","collectionModal","config","contextSelectorButtonService","errorModalService","productDetailsModal","utilService",function(e,t,o,r,l,p,f,u){function F(){p.open(r.lang.flyerFlippProductNotFoundErrorBody,r.lang.flyerFlippBackToFlyer,null,r.lang.flyerFlippProductNotFoundErrorTitle)}r.flyerFlipp.enabled&&(e.error=!1,e.productDetailsModal=f,e.collectionModal=o,e.triageSelectorButtonClicks=l.triageSelectorButtonClicks,e.init=function(){function p(e){const{custom1:t,validFrom:r,validTo:l}=e;if(t){let e=null;(e=>Object(a.b)(`/flyer/content_by_activity_id/${e}`))(t).then(t=>{const{id:i,polytype:a}=t;d()().isBetween(r,l)||(e={type:d()().isAfter(l)?"OFFER_EXPIRED":"OFFER_UNAVAILABLE",params:{validFrom:d()(r).format(s.a),validTo:d()(l).format(s.a)}}),a===n.PRODUCT?f.open(i,{},{},e):a===n.COLLECTION&&o.open(`collections/${i}`,e)}).catch(()=>{F()})}else F();return!0}u.loadScript(i).then(()=>{var e,o;const i=null===(e=t.user)||void 0===e||null===(o=e.store)||void 0===o?void 0:o.ext_id,n=document.querySelector("#flipp-container");if(new Flipp.Storefront({accessToken:r.flyerFlipp.accessToken,merchantId:r.flyerFlipp.merchantId,storeCode:i,merchantNameIdentifier:r.flyerFlipp.merchantNameIdentifier,itemDetailsDelegate:{itemDetailsTriggered:p}}).renderStorefront(n),"trial"===(null===(a=c.b.store.getState().user)||void 0===a?void 0:a.status)){let e=!0;const t=sessionStorage.getItem("flyerFlippStore");t?t!==i&&(sessionStorage.setItem("flyerFlippStore",i),e=!1):sessionStorage.setItem("flyerFlippStore",i),e&&l.triageSelectorButtonClicks("icon")}var a}).catch(()=>{e.error=!0})})}])}}]);