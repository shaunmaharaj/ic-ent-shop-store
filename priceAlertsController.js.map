{"version":3,"sources":["webpack://UnataWidgets/./app/angular/components/account/priceAlerts/priceAlertsController.js"],"names":["angular","module","controller","$scope","auth","config","imageURLService","mobileService","ngPromise","priceAlertsService","productDetailsModal","categorizedPriceAlerts","mobile","_","loading","loadAllPriceAlerts","wrapper","getAllPriceAlerts","then","priceAlerts","priceAlert","store_product","categories","name","finally","deletePriceAlert","priceAlertId"],"mappings":"2NAGeA,cACZC,OAAO,8BAA+B,IACtCC,WACC,wBAHW,mHAIX,SACEC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEAP,EAAOO,oBAAsBA,EAC7BP,EAAOQ,uBAAyB,GAChCR,EAAOG,gBAAkBA,EACzBH,EAAOS,OAASL,EAChBJ,EAAOE,OAASA,EAChBF,EAAOU,OAAP,EACAV,EAAOW,SAAU,EAEjBX,EAAOY,mBAAqB,WAC1BZ,EAAOW,SAAU,EACSN,EAAUQ,QAAQP,EAAmBQ,kBAE/DA,GACGC,KAAKC,IACJhB,EAAOQ,uBAAyB,IAAUQ,EAAaC,GAC9CA,EAAWC,cAAcC,WAAW,GACvCF,EAAWC,cAAcC,WAAW,GAAGC,KACvC,mBAGPC,QAAQ,KACPrB,EAAOW,SAAU,KAIvBX,EAAOsB,iBAAmB,SAAUC,GACTlB,EAAUQ,QAAQP,EAAmBgB,iBAC9DA,CAAiBC,GAAcR,KAAK,KAClCf,EAAOY,wBAIXZ,EAAOY","file":"priceAlertsController.js","sourcesContent":["import _ from 'lodash'\nimport angular from 'angular'\n\nexport default angular\n  .module('PriceAlertsControllerModule', [])\n  .controller(\n    'PriceAlertsController',\n    function (\n      $scope,\n      auth,\n      config,\n      imageURLService,\n      mobileService,\n      ngPromise,\n      priceAlertsService,\n      productDetailsModal\n    ) {\n      $scope.productDetailsModal = productDetailsModal\n      $scope.categorizedPriceAlerts = {}\n      $scope.imageURLService = imageURLService\n      $scope.mobile = mobileService\n      $scope.config = config\n      $scope._ = _\n      $scope.loading = false\n\n      $scope.loadAllPriceAlerts = function () {\n        $scope.loading = true\n        const getAllPriceAlerts = ngPromise.wrapper(priceAlertsService.getAllPriceAlerts)\n\n        getAllPriceAlerts()\n          .then(priceAlerts => {\n            $scope.categorizedPriceAlerts = _.groupBy(priceAlerts, priceAlert => {\n              return priceAlert.store_product.categories[0]\n                ? priceAlert.store_product.categories[0].name\n                : 'Uncategorized'\n            })\n          })\n          .finally(() => {\n            $scope.loading = false\n          })\n      }\n\n      $scope.deletePriceAlert = function (priceAlertId) {\n        const deletePriceAlert = ngPromise.wrapper(priceAlertsService.deletePriceAlert)\n        deletePriceAlert(priceAlertId).then(() => {\n          $scope.loadAllPriceAlerts()\n        })\n      }\n\n      $scope.loadAllPriceAlerts()\n    }\n  )\n"],"sourceRoot":""}