{"version":3,"sources":["webpack://UnataWidgets/./app/angular/components/account/nav/accountNavController.js"],"names":["angular","module","controller","$injector","$scope","$state","$stateParams","accountMenuService","config","lang","mobileService","utilService","gigyaService","gigya","enabled","get","$on","breadcrumbs","current","data","section","state","accountMenuItems","getAccountMenuItems","mobile","getPageHeaderTitle","customPageHeaderTitle","length","label","promoCodeButton","values","addAPromoCode","onclick","openPromoCodeModal","gigyaChangePassword","checkForButtons","name","enablePromoCodes","loyalty"],"mappings":"qIAAA,gDAEeA,cACZC,OAAO,6BAA8B,IACrCC,WACC,uBAHW,iHAIX,SACEC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAIA,MAAMC,EACJJ,EAAOK,OAASL,EAAOK,MAAMC,QAAUX,EAAUY,IAAI,gBAAkB,KAEzEX,EAAOY,IAAI,sBAAuB,KAChCZ,EAAOa,YAAc,GAEjBZ,EAAOa,QAAQC,OACbd,EAAOa,QAAQC,KAAKF,cACtBb,EAAOa,YAAcZ,EAAOa,QAAQC,KAAKF,aAG3Cb,EAAOgB,QAAUf,EAAOa,QAAQC,KAAKC,WAIzChB,EAAOI,OAASA,EAChBJ,EAAOiB,MAAQhB,EACfD,EAAOkB,iBAAmBf,EAAmBgB,sBAC7CnB,EAAOoB,OAASd,EAEhBN,EAAOqB,mBAAqB,KAAM,QAChC,MAAM,YAAER,GAAgBb,EACxB,OACE,UAAAC,EAAOa,eAAP,mBAAgBC,YAAhB,eAAsBO,wBACrBT,GAAeA,EAAYA,EAAYU,OAAS,GAAGC,OACpD,IAKJ,MAAMC,EAAkB,CACtBD,MAAOnB,EAAKqB,OAAOC,cACnBC,QAASrB,EAAYsB,oBAIvB7B,EAAO8B,oBAAsB,IAAMtB,EAAasB,sBAGhD9B,EAAO+B,gBAAkB,IACK,yBAAxB9B,EAAOa,QAAQkB,MAAmC5B,EAAO6B,iBAAiBC,QACrET,EAEF","file":"accountNavController.js","sourcesContent":["import angular from 'angular'\n\nexport default angular\n  .module('AccountNavControllerModule', [])\n  .controller(\n    'AccountNavController',\n    function (\n      $injector,\n      $scope,\n      $state,\n      $stateParams,\n      accountMenuService,\n      config,\n      lang,\n      mobileService,\n      utilService\n    ) {\n      // Checks if gigya is enabled. We cannot inject this on controller instantiation since the existence of the service\n      // is conditional, based on whether or not gigya has been included in `app/angular/optionalComponents`\n      const gigyaService =\n        config.gigya && config.gigya.enabled ? $injector.get('gigyaService') : null\n\n      $scope.$on('$stateChangeSuccess', () => {\n        $scope.breadcrumbs = []\n\n        if ($state.current.data) {\n          if ($state.current.data.breadcrumbs) {\n            $scope.breadcrumbs = $state.current.data.breadcrumbs\n          }\n\n          $scope.section = $state.current.data.section\n        }\n      })\n\n      $scope.config = config\n      $scope.state = $state\n      $scope.accountMenuItems = accountMenuService.getAccountMenuItems()\n      $scope.mobile = mobileService\n\n      $scope.getPageHeaderTitle = () => {\n        const { breadcrumbs } = $scope\n        return (\n          $state.current?.data?.customPageHeaderTitle ||\n          (breadcrumbs && breadcrumbs[breadcrumbs.length - 1].label) ||\n          ''\n        )\n      }\n\n      // The promoCodeButton object, this is injected on the loyalty page\n      const promoCodeButton = {\n        label: lang.values.addAPromoCode,\n        onclick: utilService.openPromoCodeModal,\n      }\n\n      // Gigya password reset\n      $scope.gigyaChangePassword = () => gigyaService.gigyaChangePassword()\n\n      // Check if we need any buttons\n      $scope.checkForButtons = () => {\n        if ($state.current.name === 'main.account.loyalty' && config.enablePromoCodes.loyalty) {\n          return promoCodeButton\n        }\n        return null\n      }\n    }\n  )\n"],"sourceRoot":""}