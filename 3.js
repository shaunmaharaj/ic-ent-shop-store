(window.webpackJsonpUnataWidgets=window.webpackJsonpUnataWidgets||[]).push([[3,5],{"0961075a16197e91e376":function(e,t,r){"use strict";r.r(t),r.d(t,"AccountImportNotice",(function(){return g})),r.d(t,"AccountLinkedNotice",(function(){return S})),r.d(t,"AccountImportModal",(function(){return C})),r.d(t,"AccountImportSuccessModal",(function(){return N})),r.d(t,"AccountImportErrorModal",(function(){return D}));var a=r("8af190b70a6bc55c6f1b"),n=r("8a2d1b95e05b6a321e74"),i=r.n(n),c=r("2befd5a067fda4f72081"),o=r("c72272a7287d0d0d7bf8"),l=r("1a812efceaa55b779926"),s=r.n(l),d=r("9a0b4e03ea3c43527074");const b=["onImportClick"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const O=Object(o.hb)(e=>({root:{padding:e.size.spacing.small,background:e.color.neutral.grey1,borderRadius:e.border.radius.regular},heading:{marginTop:0},footer:{display:"flex",flexFlow:"row wrap",justifyContent:"space-between",alignItems:"flex-end",[o.pb.mediaQuery.maxWidth(e.breakpoint.small)]:{justifyContent:"flex-end"}},button:{[o.pb.mediaQuery.maxWidth(e.breakpoint.small)]:{width:"100%"}},logo:{[o.pb.mediaQuery.maxWidth(e.breakpoint.small)]:{marginTop:e.size.spacing.small}}}),{displayName:"AccountImportNotice"}),f=e=>{let{onImportClick:t}=e,r=h(e,b);const a=O(),n=c.e.selectors.getLang();return Object(d.c)("div",m(m({css:a.root},r),{},{children:[Object(d.b)(o.ab,{css:a.heading,component:"h2",variant:"body",bold:!0,children:n.icImportAccount.title}),Object(d.b)(o.ab,{component:"p",variant:"caption",children:n.icImportAccount.intro}),Object(d.b)(o.ab,{component:"p",variant:"caption",children:n.icImportAccount.listTitle}),Object(d.b)("ul",{children:n.icImportAccount.featureList.map((e,t)=>Object(d.b)("li",{children:Object(d.b)(o.ab,{variant:"caption",children:e})},t))}),Object(d.c)("div",{css:a.footer,children:[Object(d.b)(o.h,{css:a.button,onClick:t,"data-test":"import-account-button",children:n.icImportAccount.importAccount}),Object(d.b)("img",{src:s.a,css:a.logo,alt:"Instacart Logo",width:"86px"})]})]}))};f.propTypes={onImportClick:i.a.func.isRequired};var g=Object(a.memo)(f);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const x=Object(o.hb)(e=>({root:{padding:e.size.spacing.small,background:e.color.neutral.grey1,borderRadius:e.border.radius.regular},heading:{marginTop:0},footer:{display:"flex",justifyContent:"flex-end"}}),{displayName:"AccountLinkedNotice"}),P=e=>{const t=x(),r=c.e.selectors.getLang();return Object(d.c)("div",y(y({css:t.root},e),{},{children:[Object(d.b)(o.ab,{css:t.heading,component:"h3",variant:"body",bold:!0,children:r.icImportAccount.linkedTitle}),Object(d.b)(o.ab,{component:"p",variant:"caption",children:r.icImportAccount.accountLinked}),Object(d.b)("div",{css:t.footer,children:Object(d.b)("img",{src:s.a,alt:"Instacart Logo",width:"86px"})})]}))};var S=Object(a.memo)(P);const A=Object(o.hb)(e=>({heading:{margin:0,[o.pb.mediaQuery.minWidth(e.breakpoint.small)]:{fontSize:o.pb.toPx`${e.size.font.h3}`}},logo:{textAlign:"center"},features:{background:e.color.neutral.grey1,padding:o.pb.toPx`${e.size.spacing.small} ${e.size.spacing.small} ${e.size.spacing.small} 0`,overflow:"auto"},list:{margin:0},footer:{flexFlow:"column nowrap",marginTop:e.size.spacing.large,[o.pb.mediaQuery.minWidth(e.breakpoint.small)]:{flexFlow:"row nowrap",justifyContent:"center"}},dontAskMeAgain:{padding:o.pb.toPx`${e.size.spacing.medium} 0`}}),{displayName:"AccountImportModal"}),w=({onImportClick:e,cancel:t})=>{const r=A(),n=Object(o.mb)(e=>o.pb.mediaQuery.minWidth(e.breakpoint.small)),i=c.e.selectors.getLang(),[l,b]=Object(a.useState)(!1),u={skippedButtonClicked:!1,importOptOut:!1};return Object(d.c)(o.F,{roundedCorners:n,children:[n&&Object(d.b)(o.G,{children:Object(d.b)(o.L,{onClick:()=>t(u),"data-test":"desktop-modal-close"})}),Object(d.c)(o.I,{children:[Object(d.b)(o.K,{children:Object(d.b)(o.ab,{css:r.heading,component:"h1",variant:"large",color:"inverse",children:i.icImportAccount.title})}),!n&&Object(d.b)(o.J,{position:"right",children:Object(d.b)(o.L,{onClick:()=>t(u),"data-test":"mobile-modal-close"})})]}),Object(d.c)(o.H,{layout:"medium",children:[Object(d.b)("div",{css:r.logo,children:Object(d.b)("img",{src:s.a,alt:"Instacart Logo",width:"134px"})}),Object(d.b)(o.ab,{component:"p",variant:"body",children:i.icImportAccount.intro}),Object(d.b)(o.ab,{component:"p",variant:"body",children:i.icImportAccount.listTitle}),Object(d.b)("div",{css:r.features,children:Object(d.b)("ul",{css:r.list,children:i.icImportAccount.featureList.map((e,t)=>Object(d.b)("li",{children:Object(d.b)(o.ab,{variant:"body",children:e})},t))})}),Object(d.b)(o.ab,{component:"p",variant:"body",children:i.icImportAccount.outro}),Object(d.b)(o.l,{id:"dont-ask-me-again-checkbox","data-test":"dont-ask-me-again-checkbox",inputSize:"small",onChange:e=>b(e.target.checked),checked:l,styles:r.dontAskMeAgain,children:i.icImportAccount.dontAskMeAgain}),Object(d.c)(o.i,{style:r.footer,children:[Object(d.b)(o.h,{onClick:()=>e({importOptOut:l}),"data-test":"import-account-button",children:i.icImportAccount.importAccount}),Object(d.b)(o.h,{onClick:()=>t({skippedButtonClicked:!0,importOptOut:l}),variant:"link","data-test":"skip-button",children:i.skipForNow})]})]})]})};w.propTypes={onImportClick:i.a.func.isRequired,cancel:i.a.func.isRequired};var C=Object(a.memo)(w);const k=Object(o.hb)(e=>({heading:{margin:0,[o.pb.mediaQuery.minWidth(e.breakpoint.small)]:{fontSize:o.pb.toPx`${e.size.font.h3}`}},footer:{marginTop:e.size.spacing.large}}),{displayName:"AccountImportSuccessModal"}),I=({close:e})=>{const t=k(),r=c.e.selectors.getLang();return Object(d.c)(o.F,{children:[Object(d.b)(o.I,{children:Object(d.b)(o.K,{children:Object(d.b)(o.ab,{css:t.heading,component:"h1",variant:"large",color:"inverse",children:r.icImportAccount.title})})}),Object(d.c)(o.H,{layout:"dialog",children:[Object(d.b)(o.f,{variant:"success",children:r.icImportAccount.success.inProgress}),Object(d.b)(o.ab,{component:"p",variant:"body",dangerouslySetInnerHTML:{__html:`${r.icImportAccount.success.pleaseWait} ${r.icImportAccount.success.seeAccount}`}}),Object(d.b)("div",{css:t.footer,children:Object(d.b)(o.h,{fullWidth:!0,onClick:e,"data-test":"start-shopping-button",children:r.startShopping})})]})]})};I.propTypes={close:i.a.func.isRequired};var N=Object(a.memo)(I);const L=Object(o.hb)(e=>({heading:{margin:0,[o.pb.mediaQuery.minWidth(e.breakpoint.small)]:{fontSize:o.pb.toPx`${e.size.font.h3}`}},footer:{marginTop:e.size.spacing.large}}),{displayName:"AccountImportErrorModal"}),T=({goToAccount:e,close:t})=>{const r=L(),a=c.e.selectors.getLang();return Object(d.c)(o.F,{children:[Object(d.b)(o.I,{children:Object(d.b)(o.K,{children:Object(d.b)(o.ab,{css:r.heading,component:"h1",variant:"large",color:"inverse",children:a.icImportAccount.title})})}),Object(d.c)(o.H,{layout:"dialog",children:[Object(d.b)(o.f,{variant:"error",children:a.icImportAccount.error.failed}),Object(d.b)(o.ab,{component:"p",variant:"body",children:a.icImportAccount.error.tryAgain}),Object(d.c)("div",{css:r.footer,children:[Object(d.b)(o.h,{fullWidth:!0,onClick:e,"data-test":"go-to-account-button",children:a.icImportAccount.error.goToAccount}),Object(d.b)(o.h,{fullWidth:!0,onClick:t,variant:"link","data-test":"close-button",children:a.close})]})]})]})};T.propTypes={goToAccount:i.a.func.isRequired,close:i.a.func.isRequired};var D=Object(a.memo)(T)},"1191b48b166276f7754d":function(e,t,r){"use strict";r.r(t),r.d(t,"SubscriptionPage",(function(){return Y})),r.d(t,"LoyaltyTransactions",(function(){return ye})),r.d(t,"ProfilePage",(function(){return pt}));var a=r("8af190b70a6bc55c6f1b"),n=r.n(a),i=r("2befd5a067fda4f72081"),c=r("8a2d1b95e05b6a321e74"),o=r.n(c),l=r("9a0b4e03ea3c43527074");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=n.a.createContext({});class m extends n.a.PureComponent{constructor(e){super(e),this.state={unsubList:[],subscribedServices:this.buildServiceObject()}}componentDidMount(){const{services:e}=this.props,{unsubList:t}=this.state;e.forEach(e=>{const r=e.store.subscribe(()=>{this.setState({subscribedServices:this.buildServiceObject()})});this.setState({unsubList:t.concat([r])})})}componentWillUnmount(){this.state.unsubList.forEach(e=>e())}buildServiceObject(){const{services:e}=this.props;return e.reduce((e,t)=>d(d({},e),{},{[t.name]:t}),{})}render(){return Object(l.b)(u.Provider,{value:this.state.subscribedServices,children:this.props.children})}}m.propTypes={children:o.a.node,services:o.a.array};var p=m,h=r("c72272a7287d0d0d7bf8");const O=Object(h.hb)(e=>({root:{padding:h.pb.toPx`0 ${e.size.spacing.small} ${e.size.spacing.small} ${e.size.spacing.small}`,[h.pb.mediaQuery.minWidth(e.breakpoint.small)]:{padding:0}}}),{displayName:"AccountPageContainer"}),f=e=>{const{children:t}=e,r=O(e);return Object(l.b)("div",{css:r.root,children:t})};f.propTypes={children:o.a.node.isRequired};var g=Object(a.memo)(f),j=r("7d8545d2807e9743ca01"),y=r.n(j),v=r("aca98c00210418ad3d54"),x=r.n(v),P=r("3efaadfc952e5a983068");function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}y.a.extend(x.a);const C=Object(h.hb)(e=>({root:{marginBottom:40},alert:{marginBottom:e.size.spacing.large},subTitle:{margin:0},text:{margin:h.pb.toPx`${e.size.spacing.xxSmall} 0 ${e.size.spacing.small} 0`},button:{width:"100%",[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{width:220}},gridContainer:{margin:0,width:"100%",border:h.pb.toPx`${e.border.width.regular} solid ${e.color.border.light}`},gridRow:{margin:0,"& + &":{borderTop:h.pb.toPx`${e.border.width.regular} solid ${e.color.border.light}`}},footNote:{marginTop:e.size.spacing.large}}),{displayName:"SubscriptionPlan"}),k={sectionPlanTitle:"Subscription Plan",noPlanTitle:"No subscription currently",noPlanMsg:"You are currently not signed up for the monthly or annual subscription.",addPlan:"Purchase a Subscription Now",subType:"Subscription Type",expDate:"Expiration Date",successAlertTitle:"Welcome to your subscription!",alreadyOwnSubscriptionAlert:"You already have a subscription",footNote:""},I=e=>{const t=C(e),{userSubscriptions:r,subscriptionCodeExists:a,onAddSubscriptionPlanClick:n,i18n:i}=e,c=Object(h.nb)(r),o=A(A({},k),i),s=c&&c.length<r.length;return Object(l.c)("div",{css:t.root,children:[Object(l.b)(P.b,{text:o.sectionPlanTitle}),r.length>0&&Object(l.c)(l.a,{children:[a&&!s&&Object(l.b)(h.f,{css:t.alert,variant:"warning","data-test":"alert-redeem",children:Object(l.b)(h.ab,{variant:"body",bold:!0,children:o.alreadyOwnSubscriptionAlert})}),s&&Object(l.b)(h.f,{css:t.alert,variant:"success","data-test":"alert-success",children:Object(l.b)(h.ab,{variant:"body",bold:!0,children:o.successAlertTitle})}),r.map(e=>Object(l.b)("div",{"data-test":"subscription-plan-box",children:Object(l.c)(h.p,{style:t.gridContainer,children:[Object(l.c)(h.p,{css:t.gridRow,style:{margin:t.gridRow.margin},children:[Object(l.b)(h.q,{xSmall:6,small:3,medium:2,children:Object(l.b)(h.ab,{component:"span",variant:"body",bold:!0,children:o.subType})}),Object(l.b)(h.q,{xSmall:6,small:9,medium:10,children:Object(l.b)(h.ab,{component:"span",variant:"body","data-test":"subscription-name",children:e.name})})]}),Object(l.c)(h.p,{css:t.gridRow,style:{margin:t.gridRow.margin},children:[Object(l.b)(h.q,{xSmall:6,small:3,medium:2,children:Object(l.b)(h.ab,{component:"span",variant:"body",bold:!0,children:o.expDate})}),Object(l.b)(h.q,{xSmall:6,small:9,medium:10,children:Object(l.b)(h.ab,{component:"span",variant:"body",children:y()(e.expiry).format("MMMM Do, YYYY")})})]})]})},e.id)),Object(l.b)(h.ab,{css:t.footNote,component:"p",variant:"body","data-test":"foot-note",dangerouslySetInnerHTML:{__html:o.footNote}})]}),0===r.length&&Object(l.c)("div",{"data-test":"no-plan-box",children:[Object(l.b)(h.ab,{css:t.subTitle,component:"p",variant:"large",bold:!0,children:o.noPlanTitle}),Object(l.b)(h.ab,{css:t.text,component:"p",variant:"body",children:o.noPlanMsg}),Object(l.b)(h.h,{css:t.button,size:"small",onClick:n,children:o.addPlan})]})]})};I.defaultProps={i18n:{}},I.propTypes={i18n:o.a.shape({sectionPlanTitle:o.a.string,noPlanTitle:o.a.string,noPlanMsg:o.a.string,addPlan:o.a.string,subType:o.a.string,expDate:o.a.string,successAlertTitle:o.a.string,footNote:o.a.string}),userSubscriptions:o.a.arrayOf(o.a.shape({id:o.a.number,user_id:o.a.number,enterprise_subscription_id:o.a.number,status:o.a.bool,created:o.a.string,expiry:o.a.string,modified:o.a.string})).isRequired,subscriptionCodeExists:o.a.bool,onAddSubscriptionPlanClick:o.a.func.isRequired};var N=Object(a.memo)(I);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const q=Object(h.hb)(e=>({root:{display:"inline-block",width:"100%",marginBottom:e.size.spacing.small,[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{width:300,marginRight:e.size.spacing.xxSmall}},input:{width:"100%",[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{width:300}},text:{display:"block",margin:h.pb.toPx`0 0 ${e.size.spacing.small} 0`},button:{width:"100%",verticalAlign:"top",[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{width:120}}}),{displayName:"SubscriptionReedem"}),F={sectionRedeemTitle:"Redeem a Subscription",enterCodePlaceholder:"Enter subscription code",enterCode:"Enter a subscription code",errorMsg:"The code provided is invalid",submit:"Submit"},E={subscriptionCode:""},R=e=>{const t=q(e),{i18n:r,loading:n,initialSubscriptionCode:i,onSubscriptionCodeSubmit:c,onRedeemSubscriptionSuccess:o}=e,[s,d]=Object(a.useState)(E),[b,u]=Object(a.useState)(!1),[m,p]=Object(a.useState)(void 0),O=T(T({},F),r),f="subscriptionCode",g=`${f}-input`;!m&&i&&(p(i),d(T(T({},s),{},{[f]:i})));const j=()=>c(s.subscriptionCode).then(o).catch(()=>u(!0));return Object(l.c)("div",{children:[Object(l.b)(P.b,{text:O.sectionRedeemTitle}),Object(l.b)("label",{htmlFor:g,css:t.text,children:Object(l.b)(h.ab,{component:"span",variant:"body",children:O.enterCode})}),Object(l.b)(h.bb,{id:g,css:t.input,FormControlProps:{css:t.root},inputSize:"small",placeholder:O.enterCodePlaceholder,value:s.subscriptionCode,onChange:(y=f,e=>{d(T(T({},s),{},{[y]:e.target.value})),u(!1)}),name:f,disabled:n,error:b,helpText:b&&O.errorMsg,onKeyDown:e=>{switch(e.key){case"Enter":j()}},"data-test":"submit-code-input",required:!0}),Object(l.b)(h.h,{loading:n,css:t.button,style:{verticalAlign:t.button.verticalAlign},size:"small",onClick:j,"data-test":"submit-code-btn",children:O.submit})]});var y};R.defaultProps={i18n:{},loading:!1},R.propTypes={i18n:o.a.oneOfType([o.a.object,o.a.shape({sectionRedeemTitle:o.a.string,enterCodePlaceholder:o.a.string,enterCode:o.a.string,errorMsg:o.a.string,submit:o.a.string})]),loading:o.a.bool,onSubscriptionCodeSubmit:o.a.func.isRequired,initialSubscriptionCode:o.a.string,onRedeemSubscriptionSuccess:o.a.func};var M=Object(a.memo)(R);function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class $ extends n.a.Component{constructor(e){super(e),z(this,"onSubscriptionCodeSubmit",e=>{const{subscriptions:t}=this.context;return t.promiseActions.redeemSubscription(e)}),this.state={hasLoaded:!1}}componentDidMount(){const{subscriptions:e}=this.context;return e.promiseActions.getUserSubscriptions().then(()=>{this.setState({hasLoaded:!0})})}render(){const{hasLoaded:e}=this.state,{onAddSubscriptionPlanClick:t,initialSubscriptionCode:r,onRedeemSubscriptionSuccess:a}=this.props,{config:n,loading:i,subscriptions:c}=this.context,{lang:o={}}=n.selectors.getConfig(),{subscriptionPage:s={}}=o,d=c.selectors.getUserSubscriptions(),b=c.constants.REDEEM_SUBSCRIPTION,u=i.selectors.isLoading(b);return Object(l.b)(g,{children:e?Object(l.c)(l.a,{children:[Object(l.b)(N,{onAddSubscriptionPlanClick:t,userSubscriptions:d,i18n:s,subscriptionCodeExists:r.length>0}),0===d.length&&Object(l.b)(M,{initialSubscriptionCode:r,onSubscriptionCodeSubmit:this.onSubscriptionCodeSubmit,onRedeemSubscriptionSuccess:a,loading:u,i18n:s})]}):Object(l.b)(h.E,{})})}}z($,"propTypes",{onAddSubscriptionPlanClick:o.a.func,onRedeemSubscriptionSuccess:o.a.func,initialSubscriptionCode:o.a.string}),z($,"defaultProps",{initialSubscriptionCode:""}),z($,"contextType",u);var _=$;function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class U extends n.a.PureComponent{render(){return Object(l.b)(p,{services:[i.e,i.s,i.j],children:Object(l.b)(_,K({},this.props))})}}var Y=U,Q=r("9fc5f8fdc53f500bac72"),V=r("9a789c4b27e32665d671");var H=e=>{const[t,r]=Object(a.useState)(1),[n,c]=Object(a.useState)(),{loyaltyTransactionFields:o}=i.e.selectors.getConfig(),{data:l,isLoading:s,error:d}=Object(Q.e)(`limit=${e}&offset=${e*(t-1)}`);if(d)throw d;return Object(a.useEffect)(()=>{void 0!==(null==l?void 0:l.total_count)&&n!==l.total_count&&c(l.total_count)},[l,n]),{currentPage:t,setCurrentPage:r,totalCount:n,loyaltyTransactionFields:o,data:l,isLoading:s}};const G=({transaction:e,index:t,transactionFields:r,fieldFormatters:a})=>Object(l.b)(h.Z,{children:r.map(r=>{const n=e[r.name];return Object(l.b)(h.X,{"data-test":`transaction-${t}-${r.name}`,children:r.type&&a[r.type](n)||n||"-"},`${e.id}-${r.name}`)})});G.propTypes={transaction:o.a.shape({id:o.a.string.isRequired}).isRequired,index:o.a.number.isRequired,transactionFields:o.a.arrayOf(o.a.shape({name:o.a.string.isRequired,type:o.a.string})).isRequired,fieldFormatters:o.a.object},G.defaultValues={fieldFormatters:{}};var Z=Object(a.memo)(G);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const te={noTransactions:"There are currently no transactions to show.",goToPage:"Go to page {{page}}"},re={date:e=>y()(e).format("MMM DD, YYYY - hh:mm A")},ae=({limitPerPage:e})=>{const{currentPage:t,setCurrentPage:r,totalCount:a,loyaltyTransactionFields:n,data:c,isLoading:o}=H(e),s=X(X({},te),i.e.selectors.getLang());return"number"!=typeof a?Object(l.b)(h.E,{"data-test":"loading-unknown-total"}):0===a?Object(l.b)(h.f,{variant:"info","data-test":"alert-no-transactions",children:s.noTransactions}):Object(l.c)(l.a,{children:[Object(l.c)(h.V,{children:[Object(l.b)(h.Y,{children:Object(l.b)(h.Z,{children:n.map(e=>Object(l.b)(h.X,{heading:!0,scope:"col","data-test":`heading-${e.name}`,children:Object(l.b)(h.ab,{bold:!0,children:e.label})},`heading-${e.name}`))})}),Object(l.b)(h.W,{children:o?Object(l.b)(h.Z,{children:Object(l.b)(h.X,{colSpan:n.length,align:"center",children:Object(l.b)(h.E,{"data-test":"loading-known-total"})})}):c.transactions.map((e,t)=>{const r=Object(V.a)();return Object(l.b)(Z,{transaction:X(X({},e),{},{id:r}),index:t,transactionFields:n,fieldFormatters:re},r)})})]}),Object(l.b)(h.O,{currentPage:t,pageCount:Math.ceil(a/e),onPageClick:e=>r(e),ariaLabelLinkBuilder:e=>i.g.interpolate(s.goToPage,{page:e})})]})};ae.propTypes={limitPerPage:o.a.number},ae.defaultProps={limitPerPage:20};var ne=ae;const ie=Object(h.hb)({details:{display:"flex",justifyContent:"space-between"}},{displayName:"TransactionAccordion"}),ce=({transaction:e,transactionFields:t,fieldFormatters:r})=>{var a,n,i;const c=ie(),o=(e,t)=>t&&r[t](e)||e||"-";return Object(l.c)(h.a,{children:[Object(l.c)(h.e,{contentId:`${e.id}-details`,"data-test":"transaction-accordion-trigger",children:[Object(l.c)(h.B,{children:[Object(l.b)(h.ab,{variant:"body",bold:!0,"data-test":"transaction-transaction_time",children:o(e.transaction_time,null===(a=t.find(e=>"transaction_time"===e.name))||void 0===a?void 0:a.type)}),Object(l.b)(h.ab,{variant:"body","data-test":"transaction-location",children:o(e.location,null===(n=t.find(e=>"location"===e.name))||void 0===n?void 0:n.type)})]}),Object(l.b)(h.A,{children:Object(l.b)(h.ab,{variant:"body","data-test":"transaction-amount",children:o(e.amount,null===(i=t.find(e=>"amount"===e.name))||void 0===i?void 0:i.type)})}),Object(l.b)(h.A,{children:Object(l.b)(h.b,{})})]}),Object(l.b)(h.c,{id:`${e.id}-details`,card:!0,children:t.map(t=>{const r=e[t.name];return Object(l.c)("div",{css:c.details,children:[Object(l.b)(h.ab,{variant:"body",bold:!0,children:t.label}),Object(l.b)(h.ab,{variant:"body","data-test":`transaction-details-${t.name}`,children:o(r,t.type)})]},`${e.id}-${t.name}`)})})]})};ce.propTypes={transaction:o.a.shape({id:o.a.string.isRequired,transaction_time:o.a.string,location:o.a.string,amount:o.a.string}).isRequired,transactionFields:o.a.arrayOf(o.a.shape({name:o.a.string.isRequired,type:o.a.string})),fieldFormatters:o.a.object},ce.defaultValues={fieldFormatters:{}};var oe=Object(a.memo)(ce);function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const be={noTransactions:"There are currently no transactions to show.",goToPage:"Go to page {{page}}",page:"Page",prev:"Prev",next:"Next"},ue={date:e=>y()(e).format("MMM D, YYYY")},me=Object(h.hb)({center:{display:"flex",justifyContent:"center"}},{displayName:"TransactionAccordions"}),pe=({limitPerPage:e})=>{const{currentPage:t,setCurrentPage:r,totalCount:a,loyaltyTransactionFields:n,data:c,isLoading:o}=H(e),s=me(),d=se(se({},be),i.e.selectors.getLang());return"number"!=typeof a?Object(l.b)(h.E,{"data-test":"loading-unknown-total"}):0===a?Object(l.b)(h.f,{variant:"info","data-test":"alert-no-transactions",children:d.noTransactions}):Object(l.c)(l.a,{children:[o?Object(l.b)("div",{css:s.center,"data-test":"loading-known-total",children:Object(l.b)(h.E,{})}):Object(l.b)(h.d,{children:c.transactions.map(e=>{const t=Object(V.a)();return Object(l.b)(oe,{transaction:se(se({},e),{},{id:t}),transactionFields:n,fieldFormatters:ue},t)})}),Object(l.b)(h.N,{currentPage:t,pageCount:Math.ceil(a/e),onPageClick:e=>r(e),ariaLabelLinkBuilder:e=>i.g.interpolate(d.goToPage,{page:e}),pageLabel:d.page,previousLinkLabel:d.prev,nextLinkLabel:d.next})]})};pe.propTypes={limitPerPage:o.a.number},pe.defaultProps={limitPerPage:10};var he=pe;function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const je={transactionHistory:"Transaction History",transactionHistoryError:"Unable to get transaction data"};var ye=()=>{const e=fe(fe({},je),i.e.selectors.getLang()),t=Object(h.mb)(e=>h.pb.mediaQuery.maxWidth(e.breakpoint.medium));return Object(l.c)(l.a,{children:[!t&&Object(l.b)(P.b,{text:e.transactionHistory,"data-test":"transaction-section-heading"}),Object(l.b)(Q.a,{config:{suspense:!1},children:Object(l.b)(P.a,{fallback:Object(l.b)(h.f,{variant:"error","data-test":"transaction-error-fallback",children:e.transactionHistoryError}),children:t?Object(l.b)(he,{}):Object(l.b)(ne,{})})})]})},ve=r("872187f76c7f41717359");var xe=r("0961075a16197e91e376"),Pe={provinces:[{name:"Ontario",value:"ON"},{name:"Quebec",value:"QC"},{name:"British Columbia",value:"BC"},{name:"Alberta",value:"AB"},{name:"Manitoba",value:"MB"},{name:"Saskatchewan",value:"SK"},{name:"Nova Scotia",value:"NS"},{name:"New Brunswick",value:"NB"},{name:"Newfoundland and Labrador",value:"NL"},{name:"Prince Edward Island",value:"PE"},{name:"Northwest Territories",value:"NT"},{name:"Yukon",value:"YT"},{name:"Nunavut",value:"NT"}],states:[{name:"Alabama",value:"AL"},{name:"Alaska",value:"AK"},{name:"Arizona",value:"AZ"},{name:"Arkansas",value:"AR"},{name:"California",value:"CA"},{name:"Colorado",value:"CO"},{name:"Connecticut",value:"CT"},{name:"Delaware",value:"DE"},{name:"District of Columbia",value:"DC"},{name:"Florida",value:"FL"},{name:"Georgia",value:"GA"},{name:"Hawaii",value:"HI"},{name:"Idaho",value:"ID"},{name:"Illinois",value:"IL"},{name:"Indiana",value:"IN"},{name:"Iowa",value:"IA"},{name:"Kansas",value:"KS"},{name:"Kentucky",value:"KY"},{name:"Louisiana",value:"LA"},{name:"Maine",value:"ME"},{name:"Maryland",value:"MD"},{name:"Massachusetts",value:"MA"},{name:"Michigan",value:"MI"},{name:"Minnesota",value:"MN"},{name:"Mississippi",value:"MS"},{name:"Missouri",value:"MO"},{name:"Montana",value:"MT"},{name:"Nebraska",value:"NE"},{name:"Nevada",value:"NV"},{name:"New Hampshire",value:"NH"},{name:"New Jersey",value:"NJ"},{name:"New Mexico",value:"NM"},{name:"New York",value:"NY"},{name:"North Carolina",value:"NC"},{name:"North Dakota",value:"ND"},{name:"Ohio",value:"OH"},{name:"Oklahoma",value:"OK"},{name:"Oregon",value:"OR"},{name:"Pennsylvania",value:"PA"},{name:"Rhode Island",value:"RI"},{name:"South Carolina",value:"SC"},{name:"South Dakota",value:"SD"},{name:"Tennessee",value:"TN"},{name:"Texas",value:"TX"},{name:"Utah",value:"UT"},{name:"Vermont",value:"VT"},{name:"Virginia",value:"VA"},{name:"Washington",value:"WA"},{name:"West Virginia",value:"WV"},{name:"Wisconsin",value:"WI"},{name:"Wyoming",value:"WY"}]};const Se=Object(a.createContext)(null),Ae=()=>Object(a.useContext)(Se),we=()=>{const e=i.e.selectors.getConfig(),t=i.e.selectors.getLang(),r=i.v.browser.is("mobile")||i.v.browser.is("tablet"),[{billingAddress:a},n]=Ae(),c=e=>{n({type:"UPDATE_FIELD",section:"billingAddress",field:e.target.name,data:e.target.value})},o=Pe[e.provinceOptions].map(e=>({label:e.name,value:e.value}));return Object(l.c)("div",{"data-test":"billing-address",children:[Object(l.b)(P.b,{text:t.billingAddress}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{children:t.streetAddress})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{fullWidth:!0,type:"text",size:"small",name:"address1",value:a.address1||"",onChange:c})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{children:t.city})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{fullWidth:!0,type:"text",name:"city",size:"small",value:a.city||"",onChange:c})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{children:t.province})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.U,{fullWidth:!0,size:"small",name:"province",options:o,onChange:e=>{c({target:{name:"province",value:e.value||e.target.value}})},value:r?a.province:void 0,defaultValue:r?void 0:o.find(e=>e.value===a.province),native:r})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{children:t.postalCode})}),Object(l.b)(h.q,{xSmall:12,small:5,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{fullWidth:!0,type:"text",size:"small",name:"postalCode",onChange:c,value:a.postalCode||"",pattern:e.postalCodePattern})})})]})]})};we.propTypes={};var Ce=Object(a.memo)(we);const ke=Object(h.hb)(e=>({disabledInput:{border:"none",background:"none",color:e.color.text.primary,padding:"12px 0"},formLabel:{fontStyle:"italic"}})),Ie=()=>{var e;const t=ke(),r=i.e.selectors.getConfig(),a=i.e.selectors.getLang(),[{contactAddress:n,inputRefs:c},o]=Ae(),s=e=>{o({type:"UPDATE_FIELD",section:"contactAddress",field:e.target.name,data:e.target.value})},d=Pe[r.provinceOptions].map(e=>({label:e.name,value:e.value}));return Object(l.c)("div",{"data-test":"contact-address",children:[Object(l.b)(P.b,{"data-test":"section-heading",text:r.enableMultipleDeliveryAddresses?a.contactAddress:a.deliveryAddress}),r.displayDeliveryAddressNames&&Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,htmlFor:"address-first-name",children:a.firstName})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{id:"address-first-name","data-test":"address-first-name",fullWidth:!0,type:"text",size:"small",name:"firstName",value:n.firstName,onChange:s,"aria-label":`${r.lang.address} ${r.langAria.firstName}`,maxLength:r.maxNameLength,disabled:r.profileAddress.disabledFields,css:r.profileAddress.disabledFields&&t.disabledInput})})}),Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,htmlFor:"address-last-name",children:a.lastName})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{id:"address-last-name","data-test":"address-last-name",fullWidth:!0,type:"text",size:"small",name:"lastName",value:n.lastName,onChange:s,"aria-label":`${r.lang.address} ${r.langAria.lastName}`,maxLength:r.maxNameLength,disabled:r.profileAddress.disabledFields,css:r.profileAddress.disabledFields&&t.disabledInput})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,"data-test":"address1-label",htmlFor:"address1",children:r.profileAddress.showAllAddressLabels?a.addressLine1:a.streetAddress})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{id:"address1","data-test":"address1",fullWidth:!0,type:"text",size:"small",name:"address1",onChange:s,value:n.address1||"",maxLength:r.deliveryAddressFieldsMaxLength,disabled:r.profileAddress.disableAddress1xor3,css:r.profileAddress.disableAddress1xor3&&t.disabledInput})})})]}),r.profileAddress.showAddress2Field&&Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,"data-test":"address2-label",children:r.profileAddress.showAllAddressLabels&&a.addressLine2})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{"data-test":"address2",fullWidth:!0,type:"text",size:"small",name:"address2",onChange:s,value:n.address2||"","aria-label":r.langAria.secondAddress,maxLength:r.deliveryAddressFieldsMaxLength,disabled:r.profileAddress.disableAddress2xor3,css:r.profileAddress.disableAddress2xor3&&t.disabledInput})})})]}),r.profileAddress.showAddress3Field&&Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,"data-test":"address3-label",children:r.profileAddress.showAllAddressLabels&&a.addressLine3})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{"data-test":"address3",fullWidth:!0,type:"text",size:"small",name:"address3",onChange:s,value:n.address3||"","aria-label":r.langAria.secondAddress,maxLength:r.deliveryAddressFieldsMaxLength,disabled:r.profileAddress.disableAddress1xor3&&n.address1||r.profileAddress.disableAddress2xor3&&n.address2,css:(r.profileAddress.disableAddress1xor3&&n.address1||r.profileAddress.disableAddress2xor3&&n.address2)&&t.disabledInput})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,htmlFor:"city",children:a.city})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{id:"city","data-test":"city",fullWidth:!0,type:"text",name:"city",size:"small",onChange:s,value:n.city||"",maxLength:r.formFieldMaxLengths.city,disabled:r.profileAddress.disabledFields,css:r.profileAddress.disabledFields&&t.disabledInput})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,htmlFor:"province",children:a.province})}),Object(l.b)(h.q,{xSmall:12,small:5,children:Object(l.b)(h.m,{children:r.profileAddress.disabledFields?Object(l.b)(h.t,{id:"province","data-test":"province",fullWidth:!0,type:"text",size:"small",name:"province",value:n.province,disabled:!0,css:t.disabledInput}):Object(l.b)(h.U,{id:"province","data-test":"province",fullWidth:!0,type:"text",size:"small",name:"province",options:d,onChange:s,value:n.province,native:!0})})})]}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:t.formLabel,htmlFor:"postalCode",children:a.postalCode})}),Object(l.b)(h.q,{xSmall:12,small:5,children:Object(l.b)(h.m,{required:r.requirePostalCodeDuringRegistration,children:Object(l.b)(h.t,{id:"postalCode","data-test":"postalCode",fullWidth:!0,type:"text",size:"small",name:"postalCode",ref:null==c||null===(e=c.contactAddress)||void 0===e?void 0:e.postalCodeRef,onChange:s,value:n.postalCode||"",disabled:r.profileAddress.disabledFields,css:r.profileAddress.disabledFields&&t.disabledInput})})})]}),a.addressUpdateProfileInfo&&r.enableMultipleDeliveryAddresses&&!r.profileAddress.disabledFields&&Object(l.b)(h.f,{variant:"info","data-test":"update-profile-alert",children:a.addressUpdateProfileInfo})]})};Ie.propTypes={};var Ne=Object(a.memo)(Ie);const Le=()=>{const e=i.e.selectors.getConfig(),t=i.e.selectors.getLang(),[{otherInformation:r},a]=Ae(),c=e=>{a({type:"UPDATE_FIELD",section:"otherInformation",subsection:"extData",field:e.target.name,data:"checkbox"===e.target.type?e.target.checked:e.target.value})};return Object(l.c)("div",{"data-test":"other-information",children:[Object(l.b)(P.b,{text:t.otherInformation}),Object(l.b)(h.p,{align:"baseline",spacing:"xxxSmall",children:e.customProfileFields.map(e=>Object(l.c)(n.a.Fragment,{children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{htmlFor:e.key,required:e.required,children:e.label})}),Object(l.c)(h.q,{xSmall:12,small:10,children:[Object(l.b)(h.m,{required:e.required,error:e.required&&!r.extData[e.key],children:"checkbox"===e.type?Object(l.b)(h.db,{"data-test":`custom-field-${e.key}`,id:e.key,name:e.key,onChange:c,required:e.required,checked:!!r.extData[e.key]}):Object(l.b)(h.t,{"data-test":`custom-field-${e.key}`,id:e.key,name:e.key,fullWidth:!0,size:"small",onChange:c,required:e.required,placeholder:e.label,type:e.type||"text",pattern:e.pattern||".*",value:r.extData[e.key]||"",maxLength:e.maxLength||null})}),e.helpText&&Object(l.b)(h.n,{children:e.helpText})]})]},e.key))})]})};Le.propTypes={};var Te=Object(a.memo)(Le);const De=Object(h.hb)(e=>({fieldset:{border:0,padding:0,margin:0,width:"100%",marginBottom:e.size.layout.xSmall,"> legend":{marginBottom:e.size.layout.xSmall,padding:0}},disabledInput:{border:"none",background:"none",color:e.color.text.primary,padding:"12px 0"},formLabel:{fontStyle:"italic"},radio:{verticalAlign:"middle",marginLeft:e.size.spacing.xxSmall},requiredFieldsMessage:{fontStyle:"italic",margin:"0",textAlign:"left",color:e.color.text.secondary},actions:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"24px 0 16px"},editLink:{fontSize:"16px",color:e.color.brand.primary.dark}})),qe=()=>{var e,t,r;const a=De(),n=Object(ve.b)(),i=Object(ve.c)(),[{contactInfo:c,inputRefs:o},s]=Ae(),d=(e,t)=>{s({type:"UPDATE_FIELD",section:"contactInfo",subsection:t,field:e.target.name,data:e.target.value})},b=e=>d(e),u=e=>d(e,"phoneNumbers"),m=n.deliveryAddressPhoneNumberFields.map(e=>({label:e.label,value:e.key})),p=m.length>1,O=c.firstName&&!c.firstName.match(new RegExp(n.namePattern)),f=c.lastName&&!c.lastName.match(new RegExp(n.namePattern));return Object(l.c)("div",{"data-test":"contact-information",children:[Object(l.c)("div",{css:a.actions,children:[Object(l.b)("p",{css:a.requiredFieldsMessage,children:i.requiredFieldsMessage}),n.profile.showEditLink&&Object(l.b)("a",{css:a.editLink,href:n.profile.editLinkUrl,children:n.profile.editLinkText})]}),Object(l.b)(P.b,{text:"Contact Information"}),Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:a.formLabel,htmlFor:"first-name",required:!0,children:i.firstName})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.c)(h.m,{required:!0,error:!c.firstName||O,children:[Object(l.b)(h.t,{"data-test":"first-name",fullWidth:!0,id:"first-name",type:"text",size:"small",name:"firstName",value:c.firstName||"",placeholder:i.firstName,onChange:b,maxLength:n.maxNameLength,pattern:n.namePattern,disabled:n.profile.disabledNameFields,css:n.profile.disabledNameFields&&a.disabledInput,"aria-label":`${n.lang.profile} ${n.langAria.contactInformation} ${n.langAria.firstName} ${n.langAria.required}`,"aria-describedby":"first-name-help"}),!c.firstName&&Object(l.b)(h.n,{id:"first-name-help","data-test":"first-name-help",children:i.requiredForm.firstName}),O&&Object(l.b)(h.n,{id:"first-name-help","data-test":"first-name-help",children:i.requiredForm.firstNamePattern})]})}),Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:a.formLabel,htmlFor:"last-name",required:!0,children:i.lastName})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.c)(h.m,{required:!0,error:!c.lastName||f,children:[Object(l.b)(h.t,{"data-test":"last-name",id:"last-name",fullWidth:!0,type:"text",size:"small",name:"lastName",value:c.lastName||"",placeholder:i.lastName,onChange:b,maxLength:n.maxNameLength,pattern:n.namePattern,readOnly:n.disableInput.last_name,disabled:n.profile.disabledNameFields,css:n.profile.disabledNameFields&&a.disabledInput,"aria-label":`${n.lang.profile} ${n.langAria.contactInformation} ${n.langAria.lastName} ${n.langAria.required}`,"aria-describedby":"last-name-help"}),!c.lastName&&Object(l.b)(h.n,{id:"last-name-help","data-test":"last-name-help",children:i.requiredForm.lastName}),f&&Object(l.b)(h.n,{id:"last-name-help","data-test":"last-name-help",children:i.requiredForm.lastNamePattern})]})}),Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:a.formLabel,htmlFor:"email",required:!0,children:i.email})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.c)(h.m,{required:!0,error:!c.email||(null===(e=c.email)||void 0===e?void 0:e.length)>n.maxEmailLength,children:[Object(l.b)(h.t,{"data-test":"email",fullWidth:!0,id:"email",ref:null==o||null===(t=o.contactInfo)||void 0===t?void 0:t.emailRef,type:"email",name:"email",size:"small",value:c.email||"",placeholder:i.email,maxLength:n.maxEmailLength,onChange:b,disabled:n.profile.disabledEmailField,css:n.profile.disabledEmailField&&a.disabledInput,"aria-label":`${n.lang.profile} ${n.langAria.contactInformation} ${n.langAria.email} ${n.langAria.required}`,"aria-describedby":"email-help"}),!c.email&&Object(l.b)(h.n,{id:"email-help","data-test":"email-help",children:i.requiredForm.email}),(null===(r=c.email)||void 0===r?void 0:r.length)>n.maxEmailLength&&Object(l.b)(h.n,{id:"email-help","data-test":"email-help",children:i.requiredForm.emailMaxLength})]})}),n.deliveryAddressPhoneNumberFields.length&&Object(l.c)(h.q,{xSmall:12,children:[Object(l.c)("fieldset",{css:a.fieldset,children:[p&&Object(l.b)("legend",{children:i.phoneNumbers}),n.deliveryAddressPhoneNumberFields.map(e=>{var t,r;return Object(l.c)(h.p,{direction:"row",align:"baseline",spacing:"xxxSmall",children:[n.profileSMSOptInMsgOne&&"mobile_phone_number"===e.key&&Object(l.b)(h.q,{medium:12,children:Object(l.b)("div",{"data-test":"sms-opt-one",className:"sms-opt-in-message",dangerouslySetInnerHTML:{__html:n.profileSMSOptInMsgOne}})}),Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:a.formLabel,htmlFor:`phone-number-${e.key}`,required:c.primaryNumberKey===e.key&&n.collectPhoneNumbersDuringRegistration,children:e.label})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.c)(h.m,{required:c.primaryNumberKey===e.key&&n.collectPhoneNumbersDuringRegistration,error:c.primaryNumberKey===e.key&&n.collectPhoneNumbersDuringRegistration&&!c.phoneNumbers[e.key]||(null===(t=c.phoneNumbers[e.key])||void 0===t?void 0:t.length)>n.phoneNumberMaxLength,children:[Object(l.b)(h.t,{"data-test":`phone-number-${e.key}`,fullWidth:!0,type:"tel",size:"small",id:`phone-number-${e.key}`,name:e.key,maxLength:n.phoneNumberMaxLength,onChange:u,pattern:n.phoneNumberPattern,required:c.primaryNumberKey===e.key&&n.collectPhoneNumbersDuringRegistration,value:c.phoneNumbers[e.key]||"",placeholder:e.label,"aria-label":`${n.lang.profile} ${n.langAria.contactInformation} ${e.label} ${c.primaryNumberKey===e.key&&n.collectPhoneNumbersDuringRegistration?n.langAria.required:""}`,"aria-describedby":"phone-number-help",disabled:e.disabled,css:e.disabled&&a.disabledInput}),(c.primaryNumberKey===e.key&&!c.phoneNumbers[e.key]&&n.collectPhoneNumbersDuringRegistration||(null===(r=c.phoneNumbers[e.key])||void 0===r?void 0:r.length)>n.phoneNumberMaxLength)&&Object(l.b)(h.n,{id:"phone-number-help","data-test":"phone-number-help",children:i.requiredForm.phone})]})}),n.profileSMSOptInMsgTwo&&"mobile_phone_number"===e.key&&Object(l.b)(h.q,{medium:12,children:Object(l.b)("div",{"data-test":"sms-opt-two",className:"sms-opt-in-message",dangerouslySetInnerHTML:{__html:n.profileSMSOptInMsgTwo}})})]},e.key)})]}),p&&Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:a.formLabel,htmlFor:"primaryNumberKey",children:i.preferredPhoneNumber})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.U,{id:"primaryNumberKey","data-test":"primaryNumberKey",fullWidth:!0,type:"text",size:"small",name:"primaryNumberKey",options:m,onChange:b,value:c.primaryNumberKey,native:!0})})})]})]}),n.profile.showLoyaltyReadOnly&&Object(l.c)(l.a,{children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{css:a.formLabel,htmlFor:"loyaltyCard",children:i.loyaltyCard})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{required:!0,children:Object(l.b)(h.t,{"data-test":"loyaltyCard",disabled:!0,css:a.disabledInput,fullWidth:!0,type:"text",size:"small",id:"loyaltyCard",value:c.loyaltyCardNumber||"","aria-label":n.langAria.loyaltyCard})})})]})]})]})};qe.propTypes={};var Fe=Object(a.memo)(qe);const Ee=Object(h.hb)(e=>({fieldset:{border:0,padding:0,margin:0,width:"100%",marginBottom:e.size.layout.xSmall,"> legend":{marginBottom:e.size.layout.xSmall,padding:0}},hidden:{display:"none"}})),Re=e=>{if(!e)return"";if(!e.match(/(0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])[\/\-]\d{4}/g))return e;const[t,r,a]=e.split("/");return`${a}-${t}-${r}`},Me=()=>{var e;const t=Ee(),r=i.e.selectors.getConfig(),a=i.e.selectors.getLang(),[{personalInformation:n,inputRefs:c},o]=Ae(),s=(e,t)=>{o({type:"UPDATE_FIELD",section:"personalInformation",field:e,data:t})},d=e=>{s(e.target.name,e.target.value)};return Object(l.c)("div",{"data-test":"personal-information",children:[Object(l.b)(P.b,{text:a.personalInformation}),r.profilePersonalDetails.showBirthday&&Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{htmlFor:"birthday",children:a.birthday})}),Object(l.b)(h.q,{xSmall:12,small:10,children:Object(l.b)(h.m,{children:Object(l.b)(h.t,{"data-test":"birthday",id:"birthday",ref:null==c||null===(e=c.personalInformation)||void 0===e?void 0:e.birthdayRef,type:"date",size:"small",name:"birthday",placeholder:"yyyy-mm-dd",onChange:e=>{s(e.target.name,(e=>{if(!e)return null;if(!e.match(/[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])/g))return e;const[t,r,a]=e.split("-");return`${r}/${a}/${t}`})(e.target.value))},style:{fontFamily:"inherit"},value:Re(n.birthday)})})})]}),r.profilePersonalDetails.showGender&&Object(l.c)("fieldset",{css:t.fieldset,children:[Object(l.b)("legend",{css:t.hidden,children:a.gender}),Object(l.c)(h.p,{align:"center",spacing:"xxxSmall",children:[Object(l.b)(h.q,{xSmall:12,small:2,children:Object(l.b)(h.o,{children:a.gender})}),Object(l.c)(h.q,{xSmall:12,small:10,children:[Object(l.b)(h.Q,{"data-test":"gender-male",value:"male",name:"gender",id:"genderMale",onChange:d,checked:"male"===n.gender,children:Object(l.b)(h.ab,{children:a.male})}),Object(l.b)(h.Q,{"data-test":"gender-female",name:"gender",value:"female",id:"genderFemale",onChange:d,checked:"female"===n.gender,children:Object(l.b)(h.ab,{children:a.female})})]})]})]})]})};Me.propTypes={};var ze=Object(a.memo)(Me);function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ke=({disconnectSocial:e})=>{var t,r;const a=i.e.selectors.getLang(),n=i.e.selectors.getConfig(),[{connectedSocialAccounts:c}]=Ae(),o=null===(t=n.socialSignOn)||void 0===t||null===(r=t.providers)||void 0===r?void 0:r.reduce((e,t)=>_e(_e({},e),{},{[t.id]:t.label}),{});return Object(l.c)("div",{"data-test":"social-accounts",children:[Object(l.b)(P.b,{text:a.connectedSocialAccounts}),c.activeAccounts.length?c.activeAccounts.map(t=>Object(l.c)(h.p,{align:"baseline",spacing:"xxxSmall","data-test":"social-account",children:[Object(l.b)(h.q,{xSmall:2,children:Object(l.b)(h.ab,{children:o&&o[t.provider]})}),Object(l.b)(h.q,{xSmall:5,children:Object(l.b)(h.ab,{children:t.social_email})}),Object(l.b)(h.q,{xSmall:5,children:Object(l.b)(h.h,{onClick:()=>e(t),children:a.disconnect})})]},t.signature)):Object(l.b)(h.ab,{children:a.connectedSocialAccountsNone})]})};Ke.propTypes={disconnectSocial:o.a.func.isRequired};var Be=Object(a.memo)(Ke);const Ue=()=>{const e=i.e.selectors.getConfig();return Object(l.c)(h.f,{variant:"warning","data-test":"deploy-information",children:[Object(l.b)("strong",{children:"Deploy Information"}),Object(l.c)("div",{children:[Object(l.b)("strong",{children:"Version:"})," ",e.version]}),Object(l.c)("div",{children:[Object(l.b)("strong",{children:"Date:"})," ",e.timestamp]})]})};var Ye=Object(a.memo)(Ue);const Qe=Object(h.hb)(e=>({flexContainer:{[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{display:"flex",alignItems:"flex-start"}},flexForm:{[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{flexGrow:1,flexBasis:"55%"}},alert:{marginTop:e.size.spacing.large},deployInfo:{marginTop:e.size.spacing.large},saveButton:{marginTop:e.size.spacing.large},accountImport:{[h.pb.mediaQuery.minWidth(e.breakpoint.medium)]:{order:1,flexGrow:1,flexBasis:"45%",maxWidth:"450px",marginTop:e.size.spacing.large,marginLeft:e.size.spacing.large}}})),Ve=({isSaving:e,onSubmit:t,alert:r,onAlertClose:a,disconnectSocial:n,importIcAccount:i})=>{var c;const o=Qe(),s=Object(ve.b)(),d=Object(ve.c)(),[{otherInformation:{icImported:b,icUserId:u}}]=Ae(),m=s.icImportAccount&&u;return Object(l.c)("div",{css:[s.icImportAccount&&o.flexContainer],children:[m&&Object(l.b)("div",{css:o.accountImport,children:b?Object(l.b)(xe.AccountLinkedNotice,{"data-test":"account-linked-notice"}):Object(l.b)(xe.AccountImportNotice,{"data-test":"account-import-notice",onImportClick:i})}),Object(l.c)("form",{"data-test":"account-profile-form",css:[s.icImportAccount&&o.flexForm],onSubmit:t,children:[Object(l.b)(Fe,{}),s.profilePersonalDetails.shouldShow&&Object(l.b)(ze,{}),s.profileAddress.shouldShow&&Object(l.b)(Ne,{}),s.enableBillingInformation&&Object(l.b)(Ce,{}),s.customProfileFields&&s.customProfileFields.length>0&&Object(l.b)(Te,{}),(null===(c=s.socialSignOn)||void 0===c?void 0:c.enabled)&&Object(l.b)(Be,{disconnectSocial:n}),!s.profile.disableSave&&Object(l.b)(h.h,{"data-test":"submit-button",type:"submit",loading:e,css:o.saveButton,children:d.saveChanges}),r&&Object(l.b)("div",{css:o.alert,"data-test":"alert",children:Object(l.b)(h.f,{variant:r.type,onClick:a,children:r.message})}),"dev"===s.env.mode&&Object(l.b)("div",{css:o.deployInfo,children:Object(l.b)(Ye,{})})]})]})};Ve.propTypes={isSaving:o.a.bool,disconnectSocial:o.a.func.isRequired,onSubmit:o.a.func,onAlertClose:o.a.func,alert:o.a.shape({type:o.a.string,message:o.a.node}),importIcAccount:o.a.func};var He=Object(a.memo)(Ve),Ge=r("7edf83707012a871cdfb"),Ze=r("3b8ef047082df2000106"),Je=r.n(Ze);function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){tt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const rt=({user:e,loyaltyCard:t})=>{const r=i.e.selectors.getConfig(),a=r.deliveryAddressPhoneNumberFields.reduce((t,r)=>(t[r.key]=e[r.key],t),{}),n=i.v.objectToDotNotationMap(e.ext_data);return n.customProfileFields=(e=>{const t=e.map(e=>e.key).reduce((e,t)=>(e.push(...t.split(".")),e),[]);return Array.from(new Set(t))})(r.customProfileFields),{contactInfo:{firstName:e.first_name,lastName:e.last_name,email:e.email,primaryNumberKey:e.primary_number_key,phoneNumbers:a,loyaltyCardNumber:t?t.card_number:""},personalInformation:{birthday:e.birthday,gender:e.gender},contactAddress:{firstName:e.delivery_address.first_name,lastName:e.delivery_address.last_name,address1:e.delivery_address.address1,address2:e.delivery_address.address2,address3:e.delivery_address.address3,city:e.delivery_address.city,province:e.delivery_address.province,postalCode:e.delivery_address.postal_code},billingAddress:{address1:e.billing_address.address1,city:e.billing_address.city,province:e.billing_address.province,postalCode:e.billing_address.postal_code},otherInformation:{extData:n,icImported:e.ic_imported,icUserId:e.ic_user_id},connectedSocialAccounts:{activeAccounts:e.social_accounts.filter(e=>e.status)}}};var at=Object(Ge.a)((e,t)=>{switch(t.type){case"UPDATE_FIELD":return void(t.subsection?e[t.section][t.subsection][t.field]=t.data:e[t.section][t.field]=t.data);case"RESET":return rt(t.data);default:throw new Error("Invalid action")}});function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const dt=({disconnectSocial:e,importIcAccount:t})=>{const{data:r}=Object(Q.h)(),[n,c]=Object(Q.g)(),{getPrimaryLoyaltyCard:o}=it(it({},Object(Q.d)(s)),{},{getPrimaryLoyaltyCard:i.k.selectors.getPrimaryLoyaltyCard});var s;const d=Object(ve.c)(),[b,u]=Object(a.useState)(null),m=o(),p=c.isLoading,[h,O]=Object(a.useReducer)(at,rt({user:r,loyaltyCard:m})),f={contactInfo:{emailRef:Object(a.useRef)(null)},personalInformation:{birthdayRef:Object(a.useRef)(null)},contactAddress:{postalCodeRef:Object(a.useRef)(null)}};Object(a.useEffect)(()=>O({type:"RESET",data:{user:r,loyaltyCard:m}}),[m,r]),Object(a.useEffect)(()=>{if(c.error){let e=d.profileValidation.error;switch(c.error.dev_message){case"This is not a valid email address.":e=d.profileValidation.emailInvalid,f.contactInfo.emailRef.current.focus();break;case"Invalid birthday.":e=d.profileValidation.birthdayInvalid,f.personalInformation.birthdayRef.current.focus();break;case"Error thrown from external service":{const{message:t}=c.error;t&&(e=t);break}case"This email is already registered. Please login or reset your password.":case"This email is already registered.":e=d.profileValidation.emailAlreadyRegistered,f.contactInfo.emailRef.current.focus();break;case"Zip code is invalid.":e=c.error.dev_message,f.contactAddress.postalCodeRef.current.focus();break;case"Your birthday cannot be in the future.":e=c.error.dev_message,f.personalInformation.birthdayRef.current.focus()}u({type:"error",message:e})}else c.data&&u({type:"success",message:"Updated successfully!"})},[f.contactInfo.emailRef,f.personalInformation.birthdayRef,f.contactAddress.postalCodeRef,d.profileValidation.birthdayInvalid,d.profileValidation.emailInvalid,d.profileValidation.error,d.profileValidation.emailAlreadyRegistered,c.data,c.error]);const g=Object(a.useCallback)(e=>{e.preventDefault(),n((e=>{const t=i.v.objectFromDotNotationMap(e.otherInformation.extData),r=et(et(et(et({},e.contactInfo),e.contactInfo.phoneNumbers),e.personalInformation),{},{deliveryAddress:et({},e.contactAddress),billingAddress:et({},e.billingAddress),extData:et({},t)});return Je.a.decamelizeKeys(r,(e,r)=>t.customProfileFields.includes(e)||"customProfileFields"===e?e:r(e))})(h)),i.a.log({event:"event",data:{category:"account-profile",action:"submit"}})},[n,h]),j=Object(a.useCallback)(()=>u(null),[]);return Object(l.b)(Se.Provider,{value:[lt(lt({},h),{},{inputRefs:f}),O],children:Object(l.b)(He,{isSaving:p,onSubmit:g,alert:b,onAlertClose:j,disconnectSocial:e,importIcAccount:t})})};dt.propTypes={disconnectSocial:o.a.func.isRequired,importIcAccount:o.a.func};var bt=dt;const ut=Object(h.hb)(e=>({loading:{padding:e.size.spacing.xSmall,textAlign:"center"}})),mt=({disconnectSocial:e,importIcAccount:t})=>{const r=ut(),{data:n}=Object(Q.h)();return Object(l.b)(P.a,{fallback:Object(l.b)(h.f,{variant:"error",children:"Something went wrong"}),children:Object(l.b)(a.Suspense,{fallback:Object(l.b)("div",{css:r.loading,children:Object(l.b)(h.E,{})}),children:n?Object(l.b)(bt,{disconnectSocial:e,importIcAccount:t}):Object(l.b)("div",{css:r.loading,children:Object(l.b)(h.E,{"data-test":"profile-loading"})})})})};mt.propTypes={disconnectSocial:o.a.func.isRequired,importIcAccount:o.a.func};var pt=mt},"1a812efceaa55b779926":function(e,t,r){e.exports=r.p+"images/ic-logo.f8c94f2928467da7d663eed9197ff80e.svg"},"3b8ef047082df2000106":function(e,t,r){var a,n,i,c,o,l,s,d,b,u,m,p,h,O,f;i=function(e,t,r){if(!b(t)||m(t)||p(t)||h(t)||d(t))return t;var a,n=0,c=0;if(u(t))for(a=[],c=t.length;n<c;n++)a.push(i(e,t[n],r));else for(var o in a={},t)Object.prototype.hasOwnProperty.call(t,o)&&(a[e(o,r)]=i(e,t[o],r));return a},c=function(e){return O(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1)},o=function(e){var t=c(e);return t.substr(0,1).toUpperCase()+t.substr(1)},l=function(e,t){return function(e,t){var r=(t=t||{}).separator||"_",a=t.split||/(?=[A-Z])/;return e.split(a).join(r)}(e,t).toLowerCase()},s=Object.prototype.toString,d=function(e){return"function"==typeof e},b=function(e){return e===Object(e)},u=function(e){return"[object Array]"==s.call(e)},m=function(e){return"[object Date]"==s.call(e)},p=function(e){return"[object RegExp]"==s.call(e)},h=function(e){return"[object Boolean]"==s.call(e)},O=function(e){return(e-=0)==e},f=function(e,t){var r=t&&"process"in t?t.process:t;return"function"!=typeof r?e:function(t,a){return r(t,e,a)}},void 0===(n="function"==typeof(a={camelize:c,decamelize:l,pascalize:o,depascalize:l,camelizeKeys:function(e,t){return i(f(c,t),e)},decamelizeKeys:function(e,t){return i(f(l,t),e,t)},pascalizeKeys:function(e,t){return i(f(o,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}})?a.call(t,r,t,e):a)||(e.exports=n)}}]);