{"version":3,"sources":["webpack://UnataWidgets/./app/angular/components/account/passwordChange/passwordChangeController.js"],"names":["angular","module","controller","$scope","Restangular","config","userAnalytics","passwordRegex","passwordPattern","change","error","message","changing","user","api","updatePassword","old_password","oldPassword","new_password","newPassword","confirm_new_password","confirmNewPassword","then","passwordChangeForm","$setUntouched","$setPristine","logUserChangePassword","$apply","response","data"],"mappings":"sIAAA,4EAIeA,cACZC,OAAO,iCAAkC,IACzCC,WAAW,2BAFC,iDAE2B,SAAUC,EAAQC,EAAaC,EAAQC,GAC7EH,EAAOE,OAASA,EAChBF,EAAOI,cAAgBF,EAAOG,gBAC9BL,EAAOM,OAAS,kBACPN,EAAOO,aACPP,EAAOQ,QAEdR,EAAOS,UAAW,EAElBC,IAAKC,IAAID,KACNE,eAAe,CACdC,aAAcb,EAAOc,YACrBC,aAAcf,EAAOgB,YACrBC,qBAAsBjB,EAAOkB,qBAE9BC,KACC,KACEnB,EAAOQ,QAAU,wCACVR,EAAOc,mBACPd,EAAOgB,mBACPhB,EAAOkB,0BACPlB,EAAOS,SACdT,EAAOoB,mBAAmBC,gBAC1BrB,EAAOoB,mBAAmBE,eAC1BnB,EAAcoB,wBACdvB,EAAOwB,UAETC,IACEzB,EAAOO,MAAQkB,EAASC,KAAOD,EAASC,KAAKlB,QAAUiB,EAASjB,eACzDR,EAAOS,SACdT,EAAOwB","file":"passwordChangeController.js","sourcesContent":["import angular from 'angular'\n\nimport { user } from '@instacart/enterprise-services'\n\nexport default angular\n  .module('PasswordChangeControllerModule', [])\n  .controller('PasswordChangeController', function ($scope, Restangular, config, userAnalytics) {\n    $scope.config = config\n    $scope.passwordRegex = config.passwordPattern\n    $scope.change = function () {\n      delete $scope.error\n      delete $scope.message\n\n      $scope.changing = true\n\n      user.api.user\n        .updatePassword({\n          old_password: $scope.oldPassword,\n          new_password: $scope.newPassword,\n          confirm_new_password: $scope.confirmNewPassword,\n        })\n        .then(\n          () => {\n            $scope.message = 'Password changed successfully.'\n            delete $scope.oldPassword\n            delete $scope.newPassword\n            delete $scope.confirmNewPassword\n            delete $scope.changing\n            $scope.passwordChangeForm.$setUntouched()\n            $scope.passwordChangeForm.$setPristine()\n            userAnalytics.logUserChangePassword()\n            $scope.$apply()\n          },\n          response => {\n            $scope.error = response.data ? response.data.message : response.message\n            delete $scope.changing\n            $scope.$apply()\n          }\n        )\n    }\n  })\n"],"sourceRoot":""}